РЕФАКТОРИНГ!

1) Перенос кода в репозиторий dgorshenin - готово


+++ порядковые номера карточке, если тема
(плюс оптимизация редактирования порядковых номеров)


+++
Реализовать добавление изображений в карточку. Внедрить их в редактор. Если браузер не поддерживает такого, приводить ссылки на изображения. В том числе в ответах.
БОЛЕЕ ШИРОКАЯ ПОСТАНОВКА. 
- Реализация хранения файлов (asset) в системе с отслеживанием даты добавления. 
- Возможность добавить файл с диска в профиль области с автоматическим добавлением в общее хранилище файлов
- Возможность добавить файл в профиль области из внутреннего хранилища
- Возможность добавить файл с диска прямо в карточку с сохранением в области и в общем хранилище
- Возможность скачать файл из области, из общего хранилища, и даже из карточки в режиме просмотра.


- Возможность удаления файлов на любом уровне



+++
Предметная область переименовывается в Группу. Группы могут быть вложенные. При этом они остаются самостоятельными.
В группе могут быть карточки. В группу можно добавить тему. Другую группу или тему внутрь темы вложить нельзя.

+++
Умение стирать и перебрасывать сущности


+++
Новый тип карточки: Story. Зазубривать не надо, но желательно помнить, о чем говорится. Участвует в работе над ошибками, но не влияет на оценку. Или влияет?

+++
оптимизировать выгрузку/загрузку, чтобы генерились более эффективные SQL

+++
в режиме "освежить знания" - возможность редактировать карточки на лету (и, возможно, вставлять новые - продумать)

+++
в режиме освежить знания - возможность вернуться назад

+++
в режиме "освежить знания" - возможность начать с произвольной карточки



+++
на перспективу - сделать так, чтобы не работать с кнопками "Назад" и "Вперед" браузера


+++!!!!++++ не забыть при доработке
- имплементировать getServletInfo




===========================================================================





!!!
В профиль темы добавить галочку "только освежить" = готово
Добавить галочку в конструктор. если true - сортировать вопросы компаратором темы. - готово
не записывать результаты экзамена в этом случае.


+++ запоминать даты ответов на вопросы и иметь возможность вывести список вопросов, на которые были даны неверные ответы, для повторного ответа. Режим работы над ошибками



+++ 
в Question добавить дату регистрации (regDate), дату обновления (updateDate)

выводить информацию в форме редактирования карточки

обновлять updateDate при сохранении карточки

+++

в ThemeQuestion добавить атрибут orderNum - готово

в список всех вопросов прокидывать realmId (если вопросы с области) и themeId (если вопросы с темы)

редактирование карточки запускать с передачей themeId,realmId

сделать редактируемое поле "Порядковый номер в теме такой-то" в форме редактирования карточки, видимое только если карточка редактируется с параметром themeId
в поле выводить порядковый номер в списке карточек темы (сделать на карточке метод getOrderNum(Theme))

- хранить на объекте вопроса сет с линками
- регистрировать линки
- разрегистрировать линки
- по теме получать вопросы
- с вопросов брать линки по той же теме
- с линков брать порядковые номера






данный метод должен выводить порядковый номер. основания сортировки списка - orderNum в ThemeQuestion, либо regDate, либо id
если порядковый номер поменялся - последовательно проставить orderNum всем вопросам в теме (сущностям ThemeQuestion), чтобы получилась нумерация подряд. - готово

сделать метод getThemeComparator(Theme) - готово

!!! 
- сделать умную замену orderNum - если вопросу проставлено "4", он должен реально стать 4-ым.
сейчас он просто переместится вплотную к 4-му - готово
- сделать сохранение в БД - готово
- сделать сортировку списка вопросов по теме - по компаратору темы - готово
- если подвязка вопроса к новой теме - ставить в конец списка - готово
- при исключении темы из вопроса - теряется порядковый номер в той теме, которая не исключалась (очевидно, из-за того, что она перепривязывается) - готово

- проверить регистрацию/дерегистрацию/подкачку изменений из БД:
не сохраняются порядковые номера после повторного вкатывания скрипта с измененными данными - готово

- при возвращении к редактированию теряется порядковый номер - ничего страшного